# -*- coding: utf-8 -*-

import re

TONES = ('', '\\', '/', '?', '~', '.')

TONE_NAMES = ('?', 'GRAVE', 'ACUTE', 'HOOK ABOVE', 'TILDE', 'DOT BELOW')

CHAR_ORDER_DICT = {'0': 0, '1': 1, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, 'a': 10, 'A': 11, '√†': 12, '√Ä': 13, '√°': 14, '√Å': 15, '·∫£': 16, '·∫¢': 17, '√£': 18, '√É': 19, '·∫°': 20, '·∫†': 21, 'ƒÉ': 22, 'ƒÇ': 23, '·∫±': 24, '·∫∞': 25, '·∫Ø': 26, '·∫Æ': 27, '·∫≥': 28, '·∫≤': 29, '·∫µ': 30, '·∫¥': 31, '·∫∑': 32, '·∫∂': 33, '√¢': 34, '√Ç': 35, '·∫ß': 36, '·∫¶': 37, '·∫©': 38, '·∫®': 39, '·∫´': 40, '·∫™': 41, '·∫•': 42, '·∫§': 43, '·∫≠': 44, '·∫¨': 45, 'b': 46, 'B': 47, 'c': 48, 'C': 49, 'd': 50, 'D': 51, 'ƒë': 52, 'ƒê': 53, 'e': 54, 'E': 55, '√®': 56, '√à': 57, '√©': 58, '√â': 59, '·∫ª': 60, '·∫∫': 61, '·∫Ω': 62, '·∫º': 63, '·∫π': 64, '·∫∏': 65, '√™': 66, '√ä': 67, '·ªÅ': 68, '·ªÄ': 69, '·∫ø': 70, '·∫æ': 71, '·ªÉ': 72, '·ªÇ': 73, '·ªÖ': 74, '·ªÑ': 75, '·ªá': 76, '·ªÜ': 77, 'f': 78, 'F': 79, 'g': 80, 'G': 81, 'h': 82, 'H': 83, 'i': 84, 'I': 85, '√¨': 86, '√å': 87, '√≠': 88, '√ç': 89, '·ªâ': 90, '·ªà': 91, 'ƒ©': 92, 'ƒ®': 93, '·ªã': 94, '·ªä': 95, 'j': 96, 'J': 97, 'k': 98, 'K': 99, 'l': 100, 'L': 101, 'm': 102,
                   'M': 103, 'n': 104, 'N': 105, 'o': 106, 'O': 107, '√≤': 108, '√í': 109, '√≥': 110, '√ì': 111, '·ªè': 112, '·ªé': 113, '√µ': 114, '√ï': 115, '·ªç': 116, '·ªå': 117, '√¥': 118, '√î': 119, '·ªì': 120, '·ªí': 121, '·ªë': 122, '·ªê': 123, '·ªï': 124, '·ªî': 125, '·ªó': 126, '·ªñ': 127, '·ªô': 128, '·ªò': 129, '∆°': 130, '∆†': 131, '·ªù': 132, '·ªú': 133, '·ªõ': 134, '·ªö': 135, '·ªü': 136, '·ªû': 137, '·ª°': 138, '·ª†': 139, '·ª£': 140, '·ª¢': 141, 'p': 142, 'P': 143, 'q': 144, 'Q': 145, 'r': 146, 'R': 147, 's': 148, 'S': 149, 't': 150, 'T': 151, 'u': 152, 'U': 153, '√π': 154, '√ô': 155, '√∫': 156, '√ö': 157, '·ªß': 158, '·ª¶': 159, '≈©': 160, '≈®': 161, '·ª•': 162, '·ª§': 163, '∆∞': 164, '∆Ø': 165, '·ª´': 166, '·ª™': 167, '·ª©': 168, '·ª®': 169, '·ª≠': 170, '·ª¨': 171, '·ªØ': 172, '·ªÆ': 173, '·ª±': 174, '·ª∞': 175, 'v': 176, 'V': 177, 'w': 178, 'W': 179, 'x': 180, 'X': 181, 'y': 182, 'Y': 183, '·ª≥': 184, '·ª≤': 185, '√Ω': 186, '√ù': 187, '·ª∑': 188, '·ª∂': 189, '·ªπ': 190, '·ª∏': 191, '·ªµ': 192, '·ª¥': 193, 'z': 194, 'Z': 195}

CHAR_ORDER_STRING = r"0123456789aA√†√Ä√°√Å·∫£·∫¢√£√É·∫°·∫†ƒÉƒÇ·∫±·∫∞·∫Ø·∫Æ·∫≥·∫≤·∫µ·∫¥·∫∑·∫∂√¢√Ç·∫ß·∫¶·∫©·∫®·∫´·∫™·∫•·∫§·∫≠·∫¨bBcCdDƒëƒêeE√®√à√©√â·∫ª·∫∫·∫Ω·∫º·∫π·∫∏√™√ä·ªÅ·ªÄ·∫ø·∫æ·ªÉ·ªÇ·ªÖ·ªÑ·ªá·ªÜfFgGhHiI√¨√å√≠√ç·ªâ·ªàƒ©ƒ®·ªã·ªäjJkKlLmMnNoO√≤√í√≥√ì·ªè·ªé√µ√ï·ªç·ªå√¥√î·ªì·ªí·ªë·ªê·ªï·ªî·ªó·ªñ·ªô·ªò∆°∆†·ªù·ªú·ªõ·ªö·ªü·ªû·ª°·ª†·ª£·ª¢pPqQrRsStTuU√π√ô√∫√ö·ªß·ª¶≈©≈®·ª•·ª§∆∞∆Ø·ª´·ª™·ª©·ª®·ª≠·ª¨·ªØ·ªÆ·ª±·ª∞vVwWxXyY·ª≥·ª≤√Ω√ù·ª∑·ª∂·ªπ·ª∏·ªµ·ª¥zZ"

VIETNAMESE_CHARSET_REGEX = re.compile(
    r"[a-z √†√°·∫£√£·∫°ƒÉ·∫±·∫Ø·∫≥·∫µ·∫∑√¢·∫ß·∫•·∫©·∫´·∫≠√®√©·∫ª·∫Ω·∫π√™·ªÅ·∫ø·ªÉ·ªÖ·ªáƒë√¨√≠·ªâƒ©·ªã√≤√≥·ªè√µ·ªç√¥·ªì·ªë·ªï·ªó·ªô∆°·ªù·ªõ·ªü·ª°·ª£√π√∫·ªß≈©·ª•∆∞·ª´·ª©·ª≠·ªØ·ª±·ª≥√Ω·ª∑·ªπ·ªµ]+", re.IGNORECASE)

NO_TONE_CHAR_TRANS = str.maketrans("√†√°·∫£√£·∫°·∫±·∫Ø·∫≥·∫µ·∫∑·∫ß·∫•·∫©·∫´·∫≠√®√©·∫ª·∫Ω·∫π·ªÅ·∫ø·ªÉ·ªÖ·ªá√¨√≠·ªâƒ©·ªã√≤√≥·ªè√µ·ªç·ªì·ªë·ªï·ªó·ªô·ªù·ªõ·ªü·ª°·ª£√π√∫·ªß≈©·ª•·ª´·ª©·ª≠·ªØ·ª±·ª≥√Ω·ª∑·ªπ·ªµ√Ä√Å·∫¢√É·∫†·∫∞·∫Æ·∫≤·∫¥·∫∂·∫¶·∫§·∫®·∫™·∫¨√à√â·∫∫·∫º·∫∏·ªÄ·∫æ·ªÇ·ªÑ·ªÜ√å√ç·ªàƒ®·ªä√í√ì·ªé√ï·ªå·ªí·ªê·ªî·ªñ·ªò·ªú·ªö·ªû·ª†·ª¢√ô√ö·ª¶≈®·ª§·ª™·ª®·ª¨·ªÆ·ª∞·ª≤√ù·ª∂·ª∏·ª¥",
                                   "aaaaaƒÉƒÉƒÉƒÉƒÉ√¢√¢√¢√¢√¢eeeee√™√™√™√™√™iiiiiooooo√¥√¥√¥√¥√¥∆°∆°∆°∆°∆°uuuuu∆∞∆∞∆∞∆∞∆∞yyyyyAAAAAƒÇƒÇƒÇƒÇƒÇ√Ç√Ç√Ç√Ç√ÇEEEEE√ä√ä√ä√ä√äIIIIIOOOOO√î√î√î√î√î∆†∆†∆†∆†∆†UUUUU∆Ø∆Ø∆Ø∆Ø∆ØYYYYY")

# The following confusable characters are extracted from a subset of
# Unicode 15.0 confusables:
# https://www.unicode.org/Public/security/15.0.0/confusables.txt
CONFUSABLES = {
    '’ù': "'",
    'Ôºá': "'",
    '‚Äò': "'",
    '‚Äô': "'",
    '‚Äõ': "'",
    '‚Ä≤': "'",
    '‚Äµ': "'",
    '’ö': "'",
    '`': "'",
    '·øØ': "'",
    'ÔΩÄ': "'",
    '¬¥': "'",
    'ŒÑ': "'",
    '·øΩ': "'",
    '·æΩ': "'",
    '·æø': "'",
    '·øæ': "'",
    ' π': "'",
    'Õ¥': "'",
    'Àà': "'",
    'Àä': "'",
    'Àã': "'",
    'À¥': "'",
    ' ª': "'",
    ' Ω': "'",
    ' º': "'",
    ' æ': "'",
    'Íûå': "'",
    '·ëä': "'",
    '·õå': "'",
    'Ôπç': '_',
    'Ôπé': '_',
    'Ôπè': '_',
    'Íùö': '2',
    '∆ß': '2',
    'œ®': '2',
    'ÍôÑ': '2',
    '·íø': '2',
    'ÍõØ': '2',
    'Íû´': '3',
    '»ú': '3',
    '∆∑': '3',
    'Íù™': '3',
    '‚≥å': '3',
    '–ó': '3',
    '”†': '3',
    '·èé': '4',
    '∆º': '5',
    '‚≥í': '6',
    '–±': '6',
    '·èÆ': '6',
    '‡¨É': '8',
    '‡ß™': '8',
    '‡©™': '8',
    '»£': '8',
    '»¢': '8',
    '‡©ß': '9',
    '‡≠®': '9',
    '‡ß≠': '9',
    '‡µ≠': '9',
    'ÍùÆ': '9',
    '‚≥ä': '9',
    '‚ç∫': 'a',
    'ÔΩÅ': 'a',
    '…ë': 'a',
    'Œ±': 'a',
    '–∞': 'a',
    'Ôº°': 'A',
    'Œë': 'A',
    '–ê': 'A',
    '·é™': 'A',
    '·óÖ': 'A',
    'ÍìÆ': 'A',
    '∆Ñ': 'b',
    '–¨': 'b',
    '·èè': 'b',
    '·ë≤': 'b',
    '·ñØ': 'b',
    'Ôº¢': 'B',
    '‚Ñ¨': 'B',
    'Íû¥': 'B',
    'Œí': 'B',
    '–í': 'B',
    '·è¥': 'B',
    '·ó∑': 'B',
    'Íìê': 'B',
    'ÔΩÉ': 'c',
    '‚ÖΩ': 'c',
    '·¥Ñ': 'c',
    'œ≤': 'c',
    '‚≤•': 'c',
    '—Å': 'c',
    'ÍÆØ': 'c',
    'Ôº£': 'C',
    '‚Ö≠': 'C',
    '‚ÑÇ': 'C',
    '‚Ñ≠': 'C',
    'œπ': 'C',
    '‚≤§': 'C',
    '–°': 'C',
    '·èü': 'C',
    'Íìö': 'C',
    '‚Öæ': 'd',
    '‚ÖÜ': 'd',
    '‘Å': 'd',
    '·èß': 'd',
    '·ëØ': 'd',
    'Íìí': 'd',
    '‚ÖÆ': 'D',
    '‚ÖÖ': 'D',
    '·é†': 'D',
    '·óû': 'D',
    '·ó™': 'D',
    'Íìì': 'D',
    '‚ÑÆ': 'e',
    'ÔΩÖ': 'e',
    '‚ÑØ': 'e',
    '‚Öá': 'e',
    'Í¨≤': 'e',
    '–µ': 'e',
    '“Ω': 'e',
    '‚ãø': 'E',
    'Ôº•': 'E',
    '‚Ñ∞': 'E',
    'Œï': 'E',
    '–ï': 'E',
    '‚¥π': 'E',
    '·é¨': 'E',
    'Íì∞': 'E',
    'Í¨µ': 'f',
    'Íûô': 'f',
    '≈ø': 'f',
    '·∫ù': 'f',
    '÷Ñ': 'f',
    '‚Ñ±': 'F',
    'Íûò': 'F',
    'œú': 'F',
    '·ñ¥': 'F',
    'Íìù': 'F',
    'ÔΩá': 'g',
    '‚Ñä': 'g',
    '…°': 'g',
    '·∂É': 'g',
    '∆ç': 'g',
    '÷Å': 'g',
    '‘å': 'G',
    '·èÄ': 'G',
    '·è≥': 'G',
    'Íìñ': 'G',
    'ÔΩà': 'h',
    '‚Ñé': 'h',
    '“ª': 'h',
    '’∞': 'h',
    '·èÇ': 'h',
    'Ôº®': 'H',
    '‚Ñã': 'H',
    '‚Ñå': 'H',
    '‚Ñç': 'H',
    'Œó': 'H',
    '‚≤é': 'H',
    '–ù': 'H',
    '·éª': 'H',
    '·ïº': 'H',
    'Íìß': 'H',
    'Àõ': 'i',
    '‚ç≥': 'i',
    'ÔΩâ': 'i',
    '‚Ö∞': 'i',
    '‚Ñπ': 'i',
    '‚Öà': 'i',
    'ƒ±': 'i',
    '…™': 'i',
    '…©': 'i',
    'Œπ': 'i',
    '·ææ': 'i',
    'Õ∫': 'i',
    '—ñ': 'i',
    'Íôá': 'i',
    '”è': 'i',
    'Í≠µ': 'i',
    '·é•': 'i',
    'ÔΩä': 'j',
    '‚Öâ': 'j',
    'œ≥': 'j',
    '—ò': 'j',
    'Ôº™': 'J',
    'Íû≤': 'J',
    'Õø': 'J',
    '–à': 'J',
    '·é´': 'J',
    '·íç': 'J',
    'Íìô': 'J',
    '‚Ñ™': 'K',
    'Ôº´': 'K',
    'Œö': 'K',
    '‚≤î': 'K',
    '–ö': 'K',
    '·è¶': 'K',
    '·õï': 'K',
    'Íìó': 'K',
    '|': 'l',
    '‚à£': 'l',
    '‚èΩ': 'l',
    'Ôø®': 'l',
    '€±': 'l',
    'I': 'l',
    'Ôº©': 'l',
    '‚Ö†': 'l',
    '‚Ñê': 'l',
    '‚Ñë': 'l',
    '∆ñ': 'l',
    'ÔΩå': 'l',
    '‚Öº': 'l',
    '‚Ñì': 'l',
    '«Ä': 'l',
    'Œô': 'l',
    '‚≤í': 'l',
    '–Ü': 'l',
    '”Ä': 'l',
    '‚µè': 'l',
    '·õÅ': 'l',
    'Íì≤': 'l',
    '‚Ö¨': 'L',
    '‚Ñí': 'L',
    '‚≥ê': 'L',
    '·èû': 'L',
    '·í™': 'L',
    'Íì°': 'L',
    'Ôº≠': 'M',
    '‚ÖØ': 'M',
    '‚Ñ≥': 'M',
    'Œú': 'M',
    'œ∫': 'M',
    '‚≤ò': 'M',
    '–ú': 'M',
    '·é∑': 'M',
    '·ó∞': 'M',
    '·õñ': 'M',
    'Íìü': 'M',
    '’∏': 'n',
    '’º': 'n',
    'ÔºÆ': 'N',
    '‚Ñï': 'N',
    'Œù': 'N',
    '‚≤ö': 'N',
    'Íì†': 'N',
    '‡∞Ç': 'o',
    '‡≤Ç': 'o',
    '‡¥Ç': 'o',
    '‡∂Ç': 'o',
    '‡•¶': 'o',
    '‡©¶': 'o',
    '‡´¶': 'o',
    '‡Ø¶': 'o',
    '‡±¶': 'o',
    '‡≥¶': 'o',
    '‡µ¶': 'o',
    '‡πê': 'o',
    '‡ªê': 'o',
    '·ÅÄ': 'o',
    '€µ': 'o',
    'ÔΩè': 'o',
    '‚Ñ¥': 'o',
    '·¥è': 'o',
    '·¥ë': 'o',
    'Í¨Ω': 'o',
    'Œø': 'o',
    'œÉ': 'o',
    '‚≤ü': 'o',
    '–æ': 'o',
    '·Éø': 'o',
    '÷Ö': 'o',
    '‡¥†': 'o',
    '·Äù': 'o',
    '0': 'O',
    '‡ß¶': 'O',
    '‡≠¶': 'O',
    '„Äá': 'O',
    'ÔºØ': 'O',
    'Œü': 'O',
    '‚≤û': 'O',
    '–û': 'O',
    '’ï': 'O',
    '‚µî': 'O',
    '·ãê': 'O',
    '‡¨†': 'O',
    'Íì≥': 'O',
    '‚ç¥': 'p',
    'ÔΩê': 'p',
    'œÅ': 'p',
    'œ±': 'p',
    '‚≤£': 'p',
    '—Ä': 'p',
    'Ôº∞': 'P',
    '‚Ñô': 'P',
    'Œ°': 'P',
    '‚≤¢': 'P',
    '–†': 'P',
    '·è¢': 'P',
    '·ë≠': 'P',
    'Íìë': 'P',
    '‘õ': 'q',
    '’£': 'q',
    '’¶': 'q',
    '‚Ñö': 'Q',
    '‚µï': 'Q',
    'Í≠á': 'r',
    'Í≠à': 'r',
    '·¥¶': 'r',
    '‚≤Ö': 'r',
    '–≥': 'r',
    'ÍÆÅ': 'r',
    '‚Ñõ': 'R',
    '‚Ñú': 'R',
    '‚Ñù': 'R',
    '∆¶': 'R',
    '·é°': 'R',
    '·èí': 'R',
    '·ñá': 'R',
    'Íì£': 'R',
    'ÔΩì': 's',
    'Íú±': 's',
    '∆Ω': 's',
    '—ï': 's',
    'ÍÆ™': 's',
    'Ôº≥': 'S',
    '–Ö': 'S',
    '’è': 'S',
    '·èï': 'S',
    '·èö': 'S',
    'Íì¢': 'S',
    '‚ä§': 'T',
    '‚üô': 'T',
    'Ôº¥': 'T',
    'Œ§': 'T',
    '‚≤¶': 'T',
    '–¢': 'T',
    '·é¢': 'T',
    'Íìî': 'T',
    'Íûü': 'u',
    '·¥ú': 'u',
    'Í≠é': 'u',
    'Í≠í': 'u',
    ' ã': 'u',
    'œÖ': 'u',
    '’Ω': 'u',
    '‚à™': 'U',
    '‚ãÉ': 'U',
    '’ç': 'U',
    '·àÄ': 'U',
    '·ëå': 'U',
    'Íì¥': 'U',
    '‚à®': 'v',
    '‚ãÅ': 'v',
    'ÔΩñ': 'v',
    '‚Ö¥': 'v',
    '·¥†': 'v',
    'ŒΩ': 'v',
    '—µ': 'v',
    'ÍÆ©': 'v',
    '€∑': 'V',
    '‚Ö§': 'V',
    '—¥': 'V',
    '‚¥∏': 'V',
    '·èô': 'V',
    '·êØ': 'V',
    'Íõü': 'V',
    'Íì¶': 'V',
    '…Ø': 'w',
    '·¥°': 'w',
    '—°': 'w',
    '‘ù': 'w',
    '’°': 'w',
    'ÍÆÉ': 'w',
    '‘ú': 'W',
    '·é≥': 'W',
    '·èî': 'W',
    'Íì™': 'W',
    '·ôÆ': 'x',
    '√ó': 'x',
    '‚§´': 'x',
    '‚§¨': 'x',
    '‚®Ø': 'x',
    'ÔΩò': 'x',
    '‚Öπ': 'x',
    '—Ö': 'x',
    '·ïÅ': 'x',
    '·ïΩ': 'x',
    '·ô≠': 'X',
    '‚ï≥': 'X',
    'Ôº∏': 'X',
    '‚Ö©': 'X',
    'Íû≥': 'X',
    'Œß': 'X',
    '‚≤¨': 'X',
    '–•': 'X',
    '‚µù': 'X',
    '·ö∑': 'X',
    'Íì´': 'X',
    '…£': 'y',
    '·∂å': 'y',
    'ÔΩô': 'y',
    ' è': 'y',
    '·ªø': 'y',
    'Í≠ö': 'y',
    'Œ≥': 'y',
    '‚ÑΩ': 'y',
    '—É': 'y',
    '“Ø': 'y',
    '·Éß': 'y',
    'Ôºπ': 'Y',
    'Œ•': 'Y',
    'œí': 'Y',
    '‚≤®': 'Y',
    '–£': 'Y',
    '“Æ': 'Y',
    '·é©': 'Y',
    '·éΩ': 'Y',
    'Íì¨': 'Y',
    '·¥¢': 'z',
    'ÍÆì': 'z',
    'Ôº∫': 'Z',
    '‚Ñ§': 'Z',
    '‚Ñ®': 'Z',
    'Œñ': 'Z',
    '·èÉ': 'Z',
    'Íìú': 'Z',
}

CONFUSABLE_OVERRIDES = {
    '‚Äú': '"',
    '‚Äù': '"',
    'O': '0',
    '·¥Ä': 'a',
    ' ô': 'b',
    '√ü': 'b',
    '–≤': 'b',
    '·èº': 'b',
    'Õº': 'c',
    'ƒã': 'c',
    '·¥Ö': 'd',
    '·¥Ü': 'ƒë',
    '·µ≠': 'ƒë',
    '∆å': 'ƒë',
    'Íú∞': 'f',
    '…¢': 'g',
    '«•': 'g',
    '–Ω': 'h',
    '…¶': 'h',
    'ùöí': 'i',
    '‡πÄ': 'i',
    '‚±™': 'k',
    '·¥ã': 'k',
    '–∫': 'k',
    '“ú': 'k',
    'ùöï': 'l',
    ' ü': 'l',
    'Ííí': 'l',
    '·¥ç': 'm',
    '–º': 'm',
    '…¥': 'n',
    '‡∏ó': 'n',
    '–ø': 'n',
    '·πÖ': 'n',
    'ùöò': 'o',
    '—ª': 'o',
    '÷Ñ': 'p',
    '·¥ò': 'p',
    '◊ß': 'p',
    'ÍûØ': 'q',
    'ùöö': 'q',
    '…æ': 'r',
    'ùöú': 's',
    '·é¶': 's',
    '—Ç': 't',
    'œÑ': 't',
    'ùö°': 'x',
    '√ø': 'y',
    '…£': 'y',
}

CONFUSABLE_CHAR_TRANS = str.maketrans({**CONFUSABLES, **CONFUSABLE_OVERRIDES})
